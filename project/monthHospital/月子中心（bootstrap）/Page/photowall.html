<!DOCTYPE html>
<html>
<head>
    <title>照片墙</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" type="text/css" href="css/photowall.css" />
</head>
<body>
<div id="tf_loading" class="tf_loading"></div>
<div id="tf_bg" class="tf_bg">
    <img src="images/102房间阳光威尼斯_1.jpg" alt="阳光威尼斯" longdesc="images/102房间阳光威尼斯_1.jpg" />
    <img src="images/102房间阳光威尼斯_2.jpg" alt="阳光威尼斯" longdesc="images/102房间阳光威尼斯_2.jpg"/>
    <img src="images/205阳光爱尔兰_1.jpg" alt="阳光爱尔兰" longdesc="images/205阳光爱尔兰_1.jpg"/>
    <img src="images/205阳光爱尔兰_2.jpg" alt="阳光爱尔兰" longdesc="images/205阳光爱尔兰_2.jpg"/>
    <img src="images/207房间阳光美利坚_1.jpg" alt="阳光美利坚" longdesc="images/207房间阳光美利坚_1.jpg"/>
    <img src="images/207房间阳光美利坚_2.jpg" alt="阳光美利坚" longdesc="images/207房间阳光美利坚_2.jpg"/>
    <img src="images/210阳光香港岛_1.jpg" alt="阳光香港岛" longdesc="images/210阳光香港岛_1.jpg"/>
    <img src="images/210阳光香港岛_2.jpg" alt="阳光香港岛" longdesc="images/210阳光香港岛_2.jpg"/>
    <img src="images/209阳光首尔_1.jpg" alt="阳光首尔" longdesc="images/209阳光首尔_1.jpg"/>
    <img src="images/209阳光首尔_2.jpg" alt="阳光首尔" longdesc="images/209阳光首尔_2.jpg"/>
    <img src="images/多功能瑜伽室_1.jpg" alt="多功能瑜伽室" longdesc="images/多功能瑜伽室_1.jpg"/>
    <img src="images/多功能瑜伽室_2.jpg" alt="多功能瑜伽室" longdesc="images/多功能瑜伽室_2.jpg"/>
    <img src="images/按摩室_1.jpg" alt="按摩室" longdesc="images/按摩室_1.jpg"/>
    <img src="images/阳光大埔岛_1.jpg" alt="阳光大埔岛" longdesc="images/阳光大埔岛_1.jpg"/>
    <img src="images/阳光大埔岛_2.jpg" alt="阳光大埔岛" longdesc="images/阳光大埔岛_2.jpg"/>
    <img src="images/餐厅_1.jpg" alt="餐厅" longdesc="images/餐厅_1.jpg"/>
    <img src="images/餐厅_2.jpg" alt="餐厅" longdesc="images/餐厅_2.jpg"/>
    <div class="tf_pattern"></div>
</div>
<div id="tf_content_wrapper" class="tf_content_wrapper">
    <div class="tf_content" id="content1" style="display:block;">
        <h2>阳光威尼斯</h2>
        <p>沐浴在阳光之下，感受水城之都</p>
    </div>
    <div class="tf_content" id="content2">
        <h2>阳光威尼斯</h2>
        <p>让你足不出户享受欧洲风情</p>
    </div>
    <div class="tf_content" id="content3">
        <h2>阳光爱尔兰</h2>
        <p>爱尔兰风景如画，它丰富多采的自然风光令人神往，这里有翠绿的乡村，绵延的沙滩，蜿蜒曲折的湖岸和河流。</p>
    </div>
    <div class="tf_content" id="content4">
        <h2>阳光爱尔兰</h2>
        <p>让您感受充满朝气的，活泼的民族文化</p>
    </div>
    <div class="tf_content" id="content5">
        <h2>阳光美利坚</h2>
        <p>简约而不简单的室内风格</p>
    </div>
    <div class="tf_content" id="content6">
        <h2>阳光美利坚</h2>
        <p>大气而又内敛</p>
    </div>
    <div class="tf_content" id="content7">
        <h2>阳光香港岛</h2>
        <p>富丽堂皇的风格，让您体验港人的生活</p>
    </div>
    <div class="tf_content" id="content8">
        <h2>阳光香港岛</h2>
        <p>富丽堂皇的风格，让您体验港人的生活</p>
    </div>
    <div class="tf_content" id="content9">
        <h2>阳光首尔</h2>
    </div>
    <div class="tf_content" id="content10">
        <h2>阳光首尔</h2>
    </div>
    <div class="tf_content" id="content11">
        <h2>多功能瑜伽室</h2>
    </div>
    <div class="tf_content" id="content12">
        <h2>多功能瑜伽室</h2>
    </div>
    <div class="tf_content" id="content13">
        <h2>按摩室</h2>
    </div>
    <div class="tf_content" id="content14">
        <h2>阳光大埔岛</h2>
    </div>
    <div class="tf_content" id="content15">
        <h2>阳光大埔岛</h2>
    </div>
    <div class="tf_content" id="content16">
        <h2>餐厅</h2>
    </div>
    <div class="tf_content" id="content17">
        <h2>餐厅</h2>
    </div>
</div>

<div id="tf_thumbs" class="tf_thumbs">
    <span id="tf_zoom" class="tf_zoom"></span>
    <img src="images/102房间阳光威尼斯_1.jpg" alt="Thumb1" style="width: 250px; height: 180px"/>
</div>

<div id="tf_next" class="tf_next"></div>
<div id="tf_prev" class="tf_prev"></div>


<div class="description">
    <span>使用 &uarr; 和 &darr; 键 或者鼠标滚轮也可以翻页哦~</span>
</div>
<!-- The JavaScript -->
<script type="text/javascript" src="http://www.lanrenzhijia.com/ajaxjs/1.5.0/jquery-1.5.0.min.js"></script>
<script type="text/javascript" src="http://www.lanrenzhijia.com/ajaxjs/jquery-ui.min.js"></script>
<script type="text/javascript" src="js/jquery.flip.js"></script>
<script type="text/javascript" src="js/jquery-mousewheel-3.0.4/jquery.mousewheel.min.js"></script>
<script type="text/javascript">
    /*
     the images preload plugin
     */
    (function($) {
        $.fn.preload = function(options) {
            var opts 	= $.extend({}, $.fn.preload.defaults, options);
            o			= $.meta ? $.extend({}, opts, this.data()) : opts;
            var c		= this.length,
                    l		= 0;
            return this.each(function() {
                var $i	= $(this);
                $('<img/>').load(function(i){
                    ++l;
                    if(l == c) o.onComplete();
                }).attr('src',$i.attr('src'));
            });
        };
        $.fn.preload.defaults = {
            onComplete	: function(){return false;}
        };
    })(jQuery);
</script>
<script type="text/javascript">
    $(function() {
        var $tf_bg				= $('#tf_bg'),
                $tf_bg_images		= $tf_bg.find('img'),
                $tf_bg_img			= $tf_bg_images.eq(0),
                $tf_thumbs			= $('#tf_thumbs'),
                total				= $tf_bg_images.length,
                current				= 0,
                $tf_content_wrapper	= $('#tf_content_wrapper'),
                $tf_next			= $('#tf_next'),
                $tf_prev			= $('#tf_prev'),
                $tf_loading			= $('#tf_loading');

        //preload the images
        $tf_bg_images.preload({
            onComplete	: function(){
                $tf_loading.hide();
                init();
            }
        });

        //shows the first image and initializes events
        function init(){
            //get dimentions for the image, based on the windows size
            var dim	= getImageDim($tf_bg_img);
            //set the returned values and show the image
            $tf_bg_img.css({
                width	: dim.width,
                height	: dim.height,
                left	: dim.left,
                top		: dim.top
            }).fadeIn();

            //resizing the window resizes the $tf_bg_img
            $(window).bind('resize',function(){
                var dim	= getImageDim($tf_bg_img);
                $tf_bg_img.css({
                    width	: dim.width,
                    height	: dim.height,
                    left	: dim.left,
                    top		: dim.top
                });
            });

            //expand and fit the image to the screen
            $('#tf_zoom').live('click',
                    function(){
                        if($tf_bg_img.is(':animated'))
                            return false;

                        var $this	= $(this);
                        if($this.hasClass('tf_zoom')){
                            resize($tf_bg_img);
                            $this.addClass('tf_fullscreen')
                                    .removeClass('tf_zoom');
                        }
                        else{
                            var dim	= getImageDim($tf_bg_img);
                            $tf_bg_img.animate({
                                width	: dim.width,
                                height	: dim.height,
                                top		: dim.top,
                                left	: dim.left
                            },350);
                            $this.addClass('tf_zoom')
                                    .removeClass('tf_fullscreen');
                        }
                    }
            );

            //click the arrow down, scrolls down
            $tf_next.bind('click',function(){
                if($tf_bg_img.is(':animated'))
                    return false;
                scroll('tb');
            });

            //click the arrow up, scrolls up
            $tf_prev.bind('click',function(){
                if($tf_bg_img.is(':animated'))
                    return false;
                scroll('bt');
            });

            //mousewheel events - down / up button trigger the scroll down / up
            $(document).mousewheel(function(e, delta) {
                if($tf_bg_img.is(':animated'))
                    return false;

                if(delta > 0)
                    scroll('bt');
                else
                    scroll('tb');
                return false;
            });

            //key events - down / up button trigger the scroll down / up
            $(document).keydown(function(e){
                if($tf_bg_img.is(':animated'))
                    return false;

                switch(e.which){
                    case 38:
                        scroll('bt');
                        break;

                    case 40:
                        scroll('tb');
                        break;
                }
            });
        }

        //show next / prev image
        function scroll(dir){
            //if dir is "tb" (top -> bottom) increment current,
            //else if "bt" decrement it
            current	= (dir == 'tb')?current + 1:current - 1;

            //we want a circular slideshow,
            //so we need to check the limits of current
            if(current == total) current = 0;
            else if(current < 0) current = total - 1;

            //flip the thumb
            $tf_thumbs.flip({
                direction	: dir,
                speed		: 400,
                onBefore	: function(){
                    //the new thumb is set here
                    var content	= '<span id="tf_zoom" class="tf_zoom"></span>';
                    content		+= '<img style="width: 250px; height:180px" src="' + $tf_bg_images.eq(current).attr('longdesc') + '" alt="Thumb' + (current+1) + '"/>';
                    $tf_thumbs.html(content);
                }
            });

            //we get the next image
            var $tf_bg_img_next	= $tf_bg_images.eq(current),
            //its dimentions
                    dim				= getImageDim($tf_bg_img_next),
            //the top should be one that makes the image out of the viewport
            //the image should be positioned up or down depending on the direction
                    top	= (dir == 'tb')?$(window).height() + 'px':-parseFloat(dim.height,10) + 'px';

            //set the returned values and show the next image
            $tf_bg_img_next.css({
                width	: dim.width,
                height	: dim.height,
                left	: dim.left,
                top		: top
            }).show();

            //now slide it to the viewport
            $tf_bg_img_next.stop().animate({
                top 	: dim.top
            },1000);

            //we want the old image to slide in the same direction, out of the viewport
            var slideTo	= (dir == 'tb')?-$tf_bg_img.height() + 'px':$(window).height() + 'px';
            $tf_bg_img.stop().animate({
                top 	: slideTo
            },1000,function(){
                //hide it
                $(this).hide();
                //the $tf_bg_img is now the shown image
                $tf_bg_img	= $tf_bg_img_next;
                //show the description for the new image
                $tf_content_wrapper.children()
                        .eq(current)
                        .show();
            });
            //hide the current description
            $tf_content_wrapper.children(':visible')
                    .hide()

        }

        //animate the image to fit in the viewport
        function resize($img){
            var w_w	= $(window).width(),
                    w_h	= $(window).height(),
                    i_w	= $img.width(),
                    i_h	= $img.height(),
                    r_i	= i_h / i_w,
                    new_w,new_h;

            if(i_w > i_h){
                new_w	= w_w;
                new_h	= w_w * r_i;

                if(new_h > w_h){
                    new_h	= w_h;
                    new_w	= w_h / r_i;
                }
            }
            else{
                new_h	= w_w * r_i;
                new_w	= w_w;
            }

            $img.animate({
                width	: new_w + 'px',
                height	: new_h + 'px',
                top		: '0px',
                left	: '0px'
            },350);
        }

        //get dimentions of the image,
        //in order to make it full size and centered
        function getImageDim($img){
            var w_w	= $(window).width(),
                    w_h	= $(window).height(),
                    r_w	= w_h / w_w,
                    i_w	= $img.width(),
                    i_h	= $img.height(),
                    r_i	= i_h / i_w,
                    new_w,new_h,
                    new_left,new_top;

            if(r_w > r_i){
                new_h	= w_h;
                new_w	= w_h / r_i;
            }
            else{
                new_h	= w_w * r_i;
                new_w	= w_w;
            }


            return {
                width	: new_w + 'px',
                height	: new_h + 'px',
                left	: (w_w - new_w) / 2 + 'px',
                top		: (w_h - new_h) / 2 + 'px'
            };
        }
    });
</script>
</body>
</html>
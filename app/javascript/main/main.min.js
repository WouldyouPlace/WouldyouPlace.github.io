function revealOnScroll(){var e,a=0,n=$(window).height(),s=!0;e=navigator.userAgent.indexOf("Firefox")>0||navigator.userAgent.indexOf("MSIE")>0?document.documentElement:document.body;var t=function(t){if(s){$("header").css("position","relative");e.scrollTop;if(t=t||window.event,handleAnimate(a),t.wheelDelta<0||t.detail>0){if(a+1==$(".sideNav>ul").children().length)return;a++,i(n*a)}else if(t.wheelDelta>0||t.detail<0){if(0==a)return;a--,i(n*a)}handleAnimate(a)}},i=function(n){s=!1,$(e).animate({scrollTop:n},1e3,"linear",function(){s=!0}),$(".sideNav>ul").children().eq(a).addClass("active").siblings().removeClass("active")};navigator.userAgent.indexOf("Firefox")>0?document.addEventListener&&document.addEventListener("DOMMouseScroll",t,!1):document.onmousewheel=t,$("#allmap").hover(function(){navigator.userAgent.indexOf("Firefox")>0?document.addEventListener&&document.removeEventListener("DOMMouseScroll",t,!1):document.onmousewheel=null},function(){navigator.userAgent.indexOf("Firefox")>0?document.addEventListener&&document.addEventListener("DOMMouseScroll",t,!1):document.onmousewheel=t}),$(".sideNav>ul>li").on("click",function(){handleAnimate(a),a=$(".sideNav>ul>li").index(this),handleAnimate(a),0!=$(e).marginTop&&($(e).animate({scrollTop:a*$(window).height()},1e3),$(this).addClass("active").siblings().removeClass("active"))}),$(window).on("resize",function(){n=$(window).height()}),window.onbeforeunload=function(){$(e).scrollTop(0)}}function handleAnimate(e){function a(){$("#mt").is(".fadeInDown")?($("#mt").removeClass("fadeInDown").addClass("fadeOut"),$(".img-group").removeClass("fadeInDown").addClass("fadeOut"),$(".view").removeClass("fadeInDown").addClass("fadeOut"),$(".more").removeClass("fadeInDown").addClass("fadeOut"),$(".line").removeClass("fadeInLeft").addClass("fadeOut")):($("#mt").removeClass("fadeOut").addClass("animate2 fadeInDown"),$(".img-group").removeClass("fadeOut").addClass("animate5 fadeInDown"),$(".view").removeClass("fadeOut").addClass("animate8  fadeInDown"),$(".more").removeClass("fadeOut").addClass("animate11  fadeInDown"),$(".line").removeClass("fadeOut").addClass("animate13 fadeInLeft"))}function n(){$("#gt").is(".rollIn")?($("#gt").removeClass("rollIn").addClass("rollOut"),$("#mItem").removeClass("fadeInLeft").addClass("fadeInOut"),$("#fItem").removeClass("fadeInRight").addClass("fadeInOut"),$("#wItem").removeClass("fadeInLeft").addClass("fadeInOut"),$("#sItem").removeClass("fadeInRight").addClass("fadeInOut")):($("#gt").removeClass("rollOut").addClass("animate1 rollIn"),$("#mItem").removeClass("fadeInOut").addClass("animate4 fadeInLeft"),$("#fItem").removeClass("fadeInOut").addClass("animate4 fadeInRight"),$("#wItem").removeClass("fadeInOut").addClass("animate8 fadeInLeft"),$("#sItem").removeClass("fadeInOut").addClass("animate8 fadeInRight"))}switch(e){case 0:break;case 1:a();break;case 2:n();break;case 4:break;case 5:}}function pageTurning(){function e(){t>=a.find("li").length&&(t=0),a.css("left",-a.find("li").width()*t),$("#indicators").find("li").eq(t).addClass("active").siblings().removeClass("active"),t++}var a=$("#inner"),n=a.find("li"),s=n.length,t=1;a.width(100*s+"%"),n.width(100/s+"%"),$("#indicators li").click(function(){t=$(this).index(),a.css("left",-a.find("li").width()*t),$("#indicators").find("li").eq(t).addClass("active").siblings().removeClass("active")}),setInterval(e,3e3),window.onresize=function(){t--,t<0&&(t=2),t>2&&(t=0),a.css({transition:"left 0s linear"}),a.css("left",-a.find("li").width()*t),setTimeout(function(){a.css({transition:"left 1s linear"})},100),$("#wicket").height($(".sideNav>ul").children().length*$(window).height()),$("#wicket>section").height($(window).height())}}function hasClassName(e,a){var n=new RegExp("(?:^|\\s+)"+a+"(?:\\s+|$)");return n.test(e.className)}function addClassName(e,a){hasClassName(e,a)||(e.className=[e.className,a].join(" "))}function removeClassName(e,a){if(hasClassName(e,a)){var n=new RegExp("(?:^|\\s+)"+a+"(?:\\s+|$)","g"),s=e.className;e.className=s.replace(n," ")}}function toggleClassName(e,a){hasClassName(e,a)?removeClassName(e,a):addClassName(e,a)}function toggleShape(){var e=document.getElementById("shape");hasClassName(e,"cube")?(removeClassName(e,"cube"),addClassName(e,"ring")):(removeClassName(e,"ring"),addClassName(e,"cube"))}function toggleBackfaces(){var e=document.getElementById("backfaces").checked,a=document.getElementById("shape");e?addClassName(a,"backfaces"):removeClassName(a,"backfaces")}function gainGeolocation(){if(navigator.geolocation){var e=new BMap.Map("allmap"),a=new BMap.Geolocation;a.getCurrentPosition(function(a){if(this.getStatus()==BMAP_STATUS_SUCCESS){var n=new BMap.Marker(a.point);e.centerAndZoom(a.point,15),e.addOverlay(n),n.setAnimation(BMAP_ANIMATION_BOUNCE),e.panTo(a.point),e.addControl(new BMap.MapTypeControl),e.setCurrentCity("天津"),e.enableScrollWheelZoom(!0)}else alert("failed"+this.getStatus())},{enableHighAccuracy:!0})}else console.log("浏览器不支持地图API")}$(function(){$("#wicket").height($(".sideNav>ul").children().length*$(window).height()),$("#wicket>section").height($(window).height()),$("#skipLoad").on("click",function(){$(".loading").css("display","none")}),gainGeolocation()}),window.onload=function(){$(".loading").css("display","none"),revealOnScroll(),pageTurning(),$("#menuBtn").on("click",function(){$("header").css("position","fixed")}),$("#logOff").on("click",function(){location.href="../login/login.html"})};